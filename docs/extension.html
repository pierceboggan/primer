<!DOCTYPE html>
<html lang="en" data-color-mode="dark" data-dark-theme="dark" data-light-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>VS Code Extension — Primer Docs</title>
  <meta name="description" content="Reference for the Primer VS Code extension: commands, sidebar views, settings, walkthrough, and git integration for AI-assisted development.">
  <link rel="stylesheet" href="https://unpkg.com/@primer/css/dist/primer.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- ===== Header ===== -->
  <header class="site-header">
    <div class="container-xl px-3 px-md-6 d-flex flex-items-center flex-justify-between" style="height: var(--header-height);">
      <div class="d-flex flex-items-center" style="gap: 16px;">
        <a href="index.html" class="site-logo">
          <svg width="20" height="20" viewBox="0 0 16 16" fill="currentColor"><path d="M0 2.75C0 1.784.784 1 1.75 1h12.5c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 14.25 15H1.75A1.75 1.75 0 0 1 0 13.25Zm1.75-.25a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25V2.75a.25.25 0 0 0-.25-.25Zm7.25 8a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1-.75-.75Zm-7.25-6a.75.75 0 0 1 1.06 0l3 3a.75.75 0 0 1 0 1.06l-3 3a.75.75 0 0 1-1.06-1.06L4.44 8 1.72 5.28a.75.75 0 0 1 0-1.06Z"/></svg>
          <span>Primer</span>
        </a>
        <button class="nav-toggle" aria-label="Toggle navigation">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M1 2.75A.75.75 0 0 1 1.75 2h12.5a.75.75 0 0 1 0 1.5H1.75A.75.75 0 0 1 1 2.75Zm0 5A.75.75 0 0 1 1.75 7h12.5a.75.75 0 0 1 0 1.5H1.75A.75.75 0 0 1 1 7.75ZM1.75 12h12.5a.75.75 0 0 1 0 1.5H1.75a.75.75 0 0 1 0-1.5Z"/></svg>
        </button>
      </div>
      <nav class="nav-links">
        <a href="guide.html" class="nav-link">Guide</a>
        <a href="cli.html" class="nav-link">CLI</a>
        <a href="extension.html" class="nav-link" aria-current="page">VS Code</a>
      </nav>
      <div class="d-flex flex-items-center header-actions" style="gap: 8px;">
        <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
          <svg class="theme-icon-dark" width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M9.598 1.591a.749.749 0 0 1 .785-.175 7.001 7.001 0 1 1-8.967 8.967.75.75 0 0 1 .961-.96 5.5 5.5 0 0 0 7.046-7.046.75.75 0 0 1 .175-.786Zm1.616 1.945a7 7 0 0 1-7.678 7.678 5.499 5.499 0 1 0 7.678-7.678Z"/></svg>
          <svg class="theme-icon-light" width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8Zm0 1.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11ZM8 0a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0ZM3.076 2.783a.75.75 0 0 1 1.06 0l1.061 1.06a.75.75 0 0 1-1.06 1.061l-1.06-1.06a.75.75 0 0 1 0-1.06Zm8.787 0a.75.75 0 0 1 1.06 1.06l-1.06 1.061a.75.75 0 0 1-1.06-1.06l1.06-1.06ZM8 13a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0v-1.5A.75.75 0 0 1 8 13ZM3.076 11.217a.75.75 0 0 1 1.06 1.06l-1.06 1.061a.75.75 0 0 1-1.061-1.06l1.06-1.061Zm8.787 1.06a.75.75 0 0 1 1.06-1.06l1.061 1.06a.75.75 0 0 1-1.06 1.061l-1.061-1.06ZM0 8a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 0 1.5H.75A.75.75 0 0 1 0 8Zm13 0a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 0 1.5h-1.5A.75.75 0 0 1 13 8Z"/></svg>
        </button>
        <a href="https://github.com/pierceboggan/primer" class="btn btn-sm d-flex flex-items-center" style="gap: 6px;">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
          GitHub
        </a>
      </div>
    </div>
  </header>

  <main class="container-xl px-3 px-md-6">
    <!-- Page Header -->
    <div class="page-header">
      <h1 class="page-title">VS Code Extension</h1>
      <p class="page-desc">
        Primer's companion extension brings repository analysis, instruction generation,
        readiness assessment, and evaluations directly into VS Code.
      </p>
    </div>

    <div class="content-layout">
      <!-- Table of Contents -->
      <aside class="content-sidebar">
        <nav class="toc">
          <div class="toc-title">On this page</div>
          <a href="#installation" class="toc-link">Installation</a>
          <a href="#commands" class="toc-link">Commands</a>
          <a href="#views" class="toc-link">Sidebar Views</a>
          <a href="#settings" class="toc-link">Settings</a>
          <a href="#walkthrough" class="toc-link">Walkthrough</a>
          <a href="#git-integration" class="toc-link">Git Integration</a>
          <a href="#tips" class="toc-link">Tips</a>
        </nav>
      </aside>

      <!-- Content -->
      <div class="content-main">
        <!-- Installation -->
        <section id="installation" class="content-section">
          <h2>Installation</h2>
          <p>
            Install from the
            <a href="https://marketplace.visualstudio.com/items?itemName=digitarald.primer-vscode">VS Code Marketplace</a>,
            or search for <strong>"Primer"</strong> in the Extensions view.
          </p>
          <table class="options-table">
            <thead>
              <tr><th>Detail</th><th>Value</th></tr>
            </thead>
            <tbody>
              <tr><td><strong>Extension ID</strong></td><td><code>digitarald.primer-vscode</code></td></tr>
              <tr><td><strong>VS Code version</strong></td><td>1.109.0 or later</td></tr>
              <tr><td><strong>Categories</strong></td><td>Machine Learning, Other</td></tr>
            </tbody>
          </table>
          <div class="callout">
            <div class="callout-title">Prerequisite</div>
            The extension requires GitHub Copilot CLI to be installed and authenticated
            for instruction generation. Run <code>copilot</code> and use <code>/login</code>.
          </div>
        </section>

        <!-- Commands -->
        <section id="commands" class="content-section">
          <h2>Commands</h2>
          <p>
            All commands are available from the Command Palette (<code>Ctrl+Shift+P</code> / <code>Cmd+Shift+P</code>)
            when a workspace folder is open.
          </p>

          <div id="cmd-init" class="command-section">
            <h3 class="command-name">Primer: Initialize Repository</h3>
            <p class="command-desc">
              One-command setup: analyzes the repo, generates instructions, and creates configs.
              Skips existing files unless explicitly overwritten.
            </p>
          </div>

          <div id="cmd-analyze" class="command-section">
            <h3 class="command-name">Primer: Analyze Repository</h3>
            <p class="command-desc">
              Detect languages, frameworks, package managers, and monorepo structure.
              Results populate the <strong>Analysis</strong> sidebar view and are cached for reuse
              by other commands.
            </p>
          </div>

          <div id="cmd-instructions" class="command-section">
            <h3 class="command-name">Primer: Generate Copilot Instructions</h3>
            <p class="command-desc">
              Choose format (<code>copilot-instructions.md</code> or <code>AGENTS.md</code>) and generate
              AI instructions tailored to your codebase using the Copilot SDK. For monorepos,
              optionally generates per-area instructions with <code>applyTo</code> glob scoping.
            </p>
          </div>

          <div id="cmd-generate" class="command-section">
            <h3 class="command-name">Primer: Generate Configs</h3>
            <p class="command-desc">
              Create <code>.vscode/mcp.json</code> (Model Context Protocol servers) and
              <code>.vscode/settings.json</code> optimized for your detected stack.
              Interactive QuickPick lets you select which config types to generate.
            </p>
          </div>

          <div id="cmd-readiness" class="command-section">
            <h3 class="command-name">Primer: AI Readiness Report</h3>
            <p class="command-desc">
              Score the repository across 9 pillars in 5 maturity levels (Functional → Autonomous).
              Generates an interactive HTML report viewable in a VS Code webview, and populates
              the <strong>Readiness</strong> sidebar tree with drill-down details.
            </p>
          </div>

          <div id="cmd-eval" class="command-section">
            <h3 class="command-name">Primer: Run Eval</h3>
            <p class="command-desc">
              Compare AI responses with and without custom instructions. A judge model
              scores which response better follows codebase conventions. Results displayed
              in an interactive side-by-side HTML viewer.
            </p>
          </div>

          <div id="cmd-eval-init" class="command-section">
            <h3 class="command-name">Primer: Scaffold Eval Config</h3>
            <p class="command-desc">
              Auto-generate a <code>primer.eval.json</code> file with test cases derived from
              your codebase analysis. Defaults to 5 test cases, scoped by monorepo areas.
            </p>
          </div>

          <div id="cmd-pr" class="command-section">
            <h3 class="command-name">Primer: Create Pull Request</h3>
            <p class="command-desc">
              Commit Primer-generated files and open a pull request. Auto-detects GitHub
              or Azure DevOps from the git remote. Validates branch safety and checks
              for divergence before creating the PR.
            </p>
          </div>
        </section>

        <!-- Sidebar Views -->
        <section id="views" class="content-section">
          <h2>Sidebar Views</h2>
          <p>
            Primer adds a dedicated activity bar icon with two tree views.
          </p>

          <h3>Analysis View</h3>
          <p>
            Displays the results of repository analysis: detected languages, frameworks,
            package managers, and monorepo areas. Includes action buttons to generate
            instructions and configs for specific areas. Shows a welcome message when
            no analysis has been run yet.
          </p>

          <h3>Readiness View</h3>
          <p>
            Shows readiness assessment results organized hierarchically:
          </p>
          <ul>
            <li><strong>Top level:</strong> Overall maturity level and score</li>
            <li><strong>Groups:</strong> Repo Health (8 pillars) and AI Setup</li>
            <li><strong>Criteria:</strong> Individual pass/fail items with evidence tooltips</li>
          </ul>
          <p>
            After running readiness, the view description updates to show the achieved level
            (e.g., "Level 4 achieved").
          </p>
        </section>

        <!-- Settings -->
        <section id="settings" class="content-section">
          <h2>Settings</h2>
          <p>
            Configure Primer through VS Code's settings (<code>Ctrl+,</code> / <code>Cmd+,</code>).
          </p>
          <table class="options-table">
            <thead>
              <tr><th>Setting</th><th>Type</th><th>Default</th><th>Description</th></tr>
            </thead>
            <tbody>
              <tr>
                <td><code>primer.model</code></td>
                <td>string</td>
                <td><code>claude-sonnet-4.5</code></td>
                <td>Default Copilot model for instruction generation and recommendations.</td>
              </tr>
              <tr>
                <td><code>primer.autoAnalyze</code></td>
                <td>boolean</td>
                <td><code>false</code></td>
                <td>Automatically analyze the repository when the workspace opens.</td>
              </tr>
              <tr>
                <td><code>primer.judgeModel</code></td>
                <td>string</td>
                <td><em>(unset)</em></td>
                <td>Copilot model for judging eval responses. Falls back to <code>primer.model</code> if not set.</td>
              </tr>
            </tbody>
          </table>
        </section>

        <!-- Walkthrough -->
        <section id="walkthrough" class="content-section">
          <h2>Walkthrough</h2>
          <p>
            The extension includes a guided 5-step walkthrough (<em>"Get Started with Primer"</em>)
            accessible from the Welcome tab or Command Palette.
          </p>
          <ol>
            <li>
              <strong>Analyze Your Repository</strong> —
              Discover languages, frameworks, and project structure.
            </li>
            <li>
              <strong>Generate AI Instructions</strong> —
              Create custom instructions that teach AI about your codebase conventions.
            </li>
            <li>
              <strong>Generate Configs</strong> —
              Set up MCP servers and VS Code settings for AI workflows.
            </li>
            <li>
              <strong>Check AI Readiness</strong> —
              Score the repository across 9 pillars with a visual maturity report.
            </li>
            <li>
              <strong>Evaluate Effectiveness</strong> —
              Measure how instructions improve AI responses with side-by-side comparisons.
            </li>
          </ol>
          <p>
            Each step tracks completion via command execution, so the walkthrough progresses
            as you use the features.
          </p>
        </section>

        <!-- Git Integration -->
        <section id="git-integration" class="content-section">
          <h2>Git Integration</h2>
          <p>
            The extension uses VS Code's built-in <code>vscode.git</code> API for all git operations:
          </p>
          <ul>
            <li>Repository and monorepo detection</li>
            <li>Branch validation (prevents PR creation from default branch)</li>
            <li>Divergence checking between base and feature branches</li>
            <li>Intelligent file staging — only stages Primer-generated files</li>
            <li>Remote detection to distinguish GitHub from Azure DevOps</li>
          </ul>
          <div class="callout">
            <div class="callout-title">Note</div>
            The extension never bundles <code>simple-git</code>. All git operations go through
            the built-in VS Code git extension API for consistency and performance.
          </div>
        </section>

        <!-- Tips -->
        <section id="tips" class="content-section">
          <h2>Tips</h2>
          <ul>
            <li>
              Run <strong>Analyze Repository</strong> first — it caches results that other
              commands use for instruction generation and config detection.
            </li>
            <li>
              After analysis, the VS Code status bar shows your detected stack
              (e.g., "TypeScript, React") for quick reference.
            </li>
            <li>
              The <strong>Readiness Report</strong> webview supports both dark and light themes
              and matches your current VS Code theme automatically.
            </li>
            <li>
              For monorepos, run <strong>Generate Instructions</strong> to get per-area
              instruction files with scoped <code>applyTo</code> patterns.
            </li>
            <li>
              Use <strong>Scaffold Eval Config</strong> before <strong>Run Eval</strong> to
              auto-generate meaningful test cases from your codebase analysis.
            </li>
            <li>
              The <strong>Create Pull Request</strong> command works for both GitHub and
              Azure DevOps repos — it auto-detects the platform from your git remote.
            </li>
          </ul>
        </section>
      </div>
    </div>
  </main>

  <!-- ===== Footer ===== -->
  <footer class="site-footer">
    <div class="container-xl px-3 px-md-6 d-flex flex-justify-between flex-wrap" style="gap: 16px;">
      <div class="footer-links">
        <a href="index.html">Home</a>
        <a href="guide.html">Guide</a>
        <a href="cli.html">CLI Reference</a>
        <a href="extension.html">VS Code Extension</a>
      </div>
      <div class="footer-links">
        <a href="https://github.com/pierceboggan/primer">GitHub</a>
        <a href="https://github.com/pierceboggan/primer/blob/main/LICENSE">MIT License</a>
      </div>
    </div>
  </footer>

  <script src="script.js"></script>
</body>
</html>
